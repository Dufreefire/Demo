<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CuTools Pro - Fix Anti-Block</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
        
        /* Menu dự đoán nổi (Floating) */
        #prediction-overlay {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 380px;
            z-index: 999999; /* Luôn trên cùng */
            display: none;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(255,255,255,0.1);
            border-radius: 24px;
            padding: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .status-tai { border-color: #00f2ff !important; box-shadow: 0 0 20px #00f2ff; background: rgba(0, 242, 255, 0.1) !important; opacity: 1 !important; }
        .status-xiu { border-color: #ff0040 !important; box-shadow: 0 0 20px #ff0040; background: rgba(255, 0, 64, 0.1) !important; opacity: 1 !important; }

        /* Nút quay lại để chọn nhà cái khác */
        #back-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999999;
            display: none;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 12px;
            font-weight: bold;
        }

        /* Lobby */
        #lobby {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #020617;
            padding: 20px;
        }
    </style>
</head>
<body>

    <div id="lobby">
        <h1 class="text-3xl font-black text-indigo-500 mb-8 italic">CUTOOLS<span class="text-white">.PRO</span></h1>
        <div class="w-full max-w-sm space-y-4">
            <button onclick="goToSite('https://web.betvip.com')" class="w-full bg-slate-800 p-5 rounded-2xl flex items-center justify-between border border-white/5 hover:bg-slate-700">
                <span class="font-bold">BETVIP MD5</span>
                <i class="fas fa-chevron-right text-indigo-500"></i>
            </button>
            <button onclick="goToSite('https://sum.club')" class="w-full bg-slate-800 p-5 rounded-2xl flex items-center justify-between border border-white/5 hover:bg-slate-700">
                <span class="font-bold">SUMCLUB</span>
                <i class="fas fa-chevron-right text-indigo-500"></i>
            </button>
            <p class="text-[10px] text-center text-slate-500 mt-4 uppercase tracking-widest">Hệ thống tự động chèn Menu dự đoán</p>
        </div>
    </div>

    <div id="prediction-overlay">
        <div class="flex justify-between items-center mb-3">
            <div class="text-[10px] text-gray-400 font-mono" id="phien-id">PHIÊN: #-------</div>
            <div class="flex items-center gap-1">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                <span class="text-[9px] font-bold text-green-500 uppercase">Bot Active</span>
            </div>
        </div>
        <div class="flex gap-3">
            <div id="box-tai" class="flex-1 py-4 rounded-xl bg-slate-800 border border-white/5 opacity-20 text-center transition-all duration-300">
                <span class="text-xl font-black text-cyan-400">TÀI</span>
            </div>
            <div id="box-xiu" class="flex-1 py-4 rounded-xl bg-slate-800 border border-white/5 opacity-20 text-center transition-all duration-300">
                <span class="text-xl font-black text-red-500">XỈU</span>
            </div>
        </div>
    </div>

    <button id="back-btn" onclick="location.reload()">THOÁT TOOL</button>

    <script>
        // THAY LINK RENDER CỦA BẠN VÀO ĐÂY
        const socket = io('https://ten-app-cua-ban.onrender.com');

        function goToSite(url) {
            // FIX LỖI ĐEN MÀN HÌNH: 
            // Thay vì dùng iframe, ta điều hướng thẳng trang web sang nhà cái
            // Nhưng vẫn giữ các phần tử HTML của chúng ta tồn tại (Single Page App)
            
            document.getElementById('lobby').style.display = 'none';
            document.getElementById('prediction-overlay').style.display = 'block';
            document.getElementById('back-btn').style.display = 'block';

            // Tạo một "Lớp nền" là nhà cái
            const siteView = document.createElement('object');
            siteView.data = url;
            siteView.type = "text/html";
            siteView.style.width = "100%";
            siteView.style.height = "100%";
            siteView.style.position = "fixed";
            siteView.style.top = "0";
            siteView.style.left = "0";
            siteView.style.zIndex = "1"; // Nằm dưới Menu
            
            // Nếu dùng object vẫn bị chặn, dùng phương pháp Redirect và Inject (Cần Server-side)
            // Tuy nhiên, phương pháp Object thường lách được một số trang bị iframe chặn nhẹ
            document.body.appendChild(siteView);
            
            // Nếu trang web vẫn đen, giải pháp cuối cùng là mở cửa sổ và dùng Menu nổi Web Push
            // Nhưng ở đây chúng ta ưu tiên hiển thị đè.
        }

        socket.on('bot_update', (data) => {
            document.getElementById('phien-id').innerText = `PHIÊN: #${data.phien}`;
            const tai = document.getElementById('box-tai');
            const xiu = document.getElementById('box-xiu');

            if(data.duDoan === 'TAI') {
                tai.classList.add('status-tai');
                xiu.classList.remove('status-xiu');
            } else {
                xiu.classList.add('status-xiu');
                tai.classList.remove('status-tai');
            }
        });
    </script>
</body>
</html>
