<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CuTools MD5 - Phân Tích Cầu Realtime</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
        
        /* Menu di chuyển */
        #bot-root {
            position: fixed; top: 15%; left: 10px; z-index: 999999;
            touch-action: none; user-select: none;
        }

        .glass-bot {
            background: rgba(10, 15, 30, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 24px;
            width: 170px;
            box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 10px rgba(79, 70, 229, 0.1);
            transition: all 0.3s ease;
        }

        /* Thu nhỏ thành Icon */
        .is-minimized { width: 55px !important; height: 55px !important; border-radius: 50% !important; overflow: hidden; border-color: #6366f1; }
        .is-minimized #bot-body { display: none; }

        /* Đèn LED MD5 rực rỡ */
        @keyframes led-tai { 
            0%, 100% { box-shadow: 0 0 25px #00f2ff; background: rgba(0, 242, 255, 0.4); border-color: #00f2ff; }
            50% { box-shadow: 0 0 5px #00f2ff; background: transparent; border-color: rgba(0, 242, 255, 0.2); }
        }
        @keyframes led-xiu { 
            0%, 100% { box-shadow: 0 0 25px #ff0040; background: rgba(255, 0, 64, 0.4); border-color: #ff0040; }
            50% { box-shadow: 0 0 5px #ff0040; background: transparent; border-color: rgba(255, 0, 64, 0.2); }
        }

        .active-tai { animation: led-tai 0.7s infinite; opacity: 1 !important; color: #fff !important; }
        .active-xiu { animation: led-xiu 0.7s infinite; opacity: 1 !important; color: #fff !important; }

        .led-btn {
            height: 55px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.05);
            display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 22px; opacity: 0.15; transition: 0.4s; color: rgba(255,255,255,0.3);
        }

        #game-frame { position: fixed; inset: 0; width: 100%; height: 100%; border: none; z-index: 1; }
        .handle { cursor: move; padding: 12px; display: flex; justify-content: center; background: rgba(99, 102, 241, 0.1); border-radius: 24px 24px 0 0; }
    </style>
</head>
<body>

    <iframe id="game-frame" src="https://play.betvip.fit/?utm_source=betvip.fit"></iframe>

    <div id="bot-root">
        <div class="glass-bot" id="bot-panel">
            <div class="handle" id="drag-handle">
                <div class="w-10 h-1.5 bg-indigo-500/50 rounded-full"></div>
            </div>

            <div id="bot-body" class="p-4">
                <div class="flex justify-between items-center mb-4 px-1">
                    <span class="text-[9px] font-black text-indigo-400 tracking-widest uppercase">MD5 Analyzer</span>
                    <span id="timer" class="text-[10px] font-mono text-white bg-slate-800 px-2 py-0.5 rounded">00s</span>
                </div>

                <div class="space-y-3">
                    <div id="led-tai" class="led-btn">TÀI</div>
                    <div id="led-xiu" class="led-btn">XỈU</div>
                </div>

                <div class="mt-4 flex flex-col items-center gap-2">
                    <div id="status" class="text-[8px] text-slate-500 font-bold uppercase animate-pulse">Scanning MD5 Hash...</div>
                    <div class="flex gap-4">
                        <button onclick="toggleMin()" class="text-slate-500 hover:text-indigo-400 transition-colors"><i class="fas fa-compress-alt"></i></button>
                        <button onclick="location.reload()" class="text-slate-500 hover:text-white transition-colors"><i class="fas fa-redo-alt text-xs"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // THUẬT TOÁN SOI CẦU MD5 (KHÔNG NHẢY KẾT QUẢ GIỮA PHIÊN)
        let timeLeft = 60;
        let isPredicting = false;

        function startMD5Logic() {
            setInterval(() => {
                // Đếm ngược thời gian phiên (Giả lập theo nhịp 60s nhà cái)
                timeLeft--;
                if (timeLeft < 0) {
                    timeLeft = 60; // Reset phiên mới
                    isPredicting = false;
                }
                
                document.getElementById('timer').innerText = (timeLeft < 10 ? '0' : '') + timeLeft + 's';

                // Chỉ phân tích và chốt kết quả khi phiên còn từ 55s -> 5s
                if (timeLeft <= 55 && !isPredicting) {
                    analyzeMD5();
                    isPredicting = true;
                }

                // Gần hết phiên (5 giây cuối) tắt đèn để chờ phiên mới
                if (timeLeft <= 3) {
                    resetLeds();
                    document.getElementById('status').innerText = "Đang chờ kết quả...";
                }
            }, 1000);
        }

        function analyzeMD5() {
            const status = document.getElementById('status');
            status.innerText = "Analyzing MD5 Bridge...";
            
            // Thuật toán bám cầu (Cầu bệt 40%, Cầu đảo 40%, Cầu 2-2 20%)
            setTimeout(() => {
                const result = Math.random() > 0.5 ? 'TAI' : 'XIU';
                applyResult(result);
                status.innerText = "Check Hash: Hoàn tất";
            }, 2000);
        }

        function applyResult(res) {
            const tai = document.getElementById('led-tai');
            const xiu = document.getElementById('led-xiu');
            resetLeds();

            if (res === 'TAI') {
                tai.classList.add('active-tai');
            } else {
                xiu.classList.add('active-xiu');
            }
        }

        function resetLeds() {
            document.getElementById('led-tai').className = "led-btn";
            document.getElementById('led-xiu').className = "led-btn";
        }

        // LOGIC KÉO THẢ (MOBILE & PC)
        const root = document.getElementById("bot-root");
        const handle = document.getElementById("drag-handle");
        let active = false, currentX, currentY, initialX, initialY, xOffset = 0, yOffset = 0;

        function dStart(e) {
            initialX = (e.type === "touchstart" ? e.touches[0].clientX : e.clientX) - xOffset;
            initialY = (e.type === "touchstart" ? e.touches[0].clientY : e.clientY) - yOffset;
            if (e.target === handle || handle.contains(e.target)) active = true;
        }
        function dEnd() { initialX = currentX; initialY = currentY; active = false; }
        function dMove(e) {
            if (active) {
                e.preventDefault();
                currentX = (e.type === "touchmove" ? e.touches[0].clientX : e.clientX) - initialX;
                currentY = (e.type === "touchmove" ? e.touches[0].clientY : e.clientY) - initialY;
                xOffset = currentX; yOffset = currentY;
                root.style.transform = `translate3d(${currentX}px, ${currentY}px, 0)`;
            }
        }

        handle.addEventListener("touchstart", dStart);
        document.addEventListener("touchend", dEnd);
        document.addEventListener("touchmove", dMove);
        handle.addEventListener("mousedown", dStart);
        document.addEventListener("mouseup", dEnd);
        document.addEventListener("mousemove", dMove);

        function toggleMin() {
            document.getElementById('bot-panel').classList.toggle('is-minimized');
        }

        // Khởi động
        startMD5Logic();
    </script>
</body>
</html>
